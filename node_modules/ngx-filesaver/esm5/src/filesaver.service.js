import * as ɵngcc0 from '@angular/core';
var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {
    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;
    if (typeof Reflect === "object" && typeof Reflect.decorate === "function") r = Reflect.decorate(decorators, target, key, desc);
    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;
    return c > 3 && r && Object.defineProperty(target, key, r), r;
};
import { Injectable } from '@angular/core';
import { saveAs } from 'file-saver';
import * as i0 from "@angular/core";
var FileSaverService = /** @class */ (function () {
    function FileSaverService() {
    }
    Object.defineProperty(FileSaverService.prototype, "isFileSaverSupported", {
        get: function () {
            try {
                return !!new Blob();
            }
            catch (e) {
                return false;
            }
        },
        enumerable: true,
        configurable: true
    });
    FileSaverService.prototype.genType = function (fileName) {
        if (!fileName || fileName.lastIndexOf('.') === -1) {
            return 'text/plain';
        }
        var type = fileName.substr(fileName.lastIndexOf('.') + 1);
        switch (type) {
            case 'txt':
                return 'text/plain';
            case 'xml':
            case 'html':
                return "text/" + type;
            case 'json':
                return 'octet/stream';
            default:
                return "application/" + type;
        }
    };
    FileSaverService.prototype.save = function (blob, fileName, filtType, option) {
        if (!blob) {
            throw new Error('Data argument should be a blob instance');
        }
        var file = new Blob([blob], { type: filtType || blob.type || this.genType(fileName) });
        saveAs(file, decodeURI(fileName || 'download'), option);
    };
    FileSaverService.prototype.saveText = function (txt, fileName, option) {
        var blob = new Blob([txt]);
        this.save(blob, fileName, null, option);
    };
    FileSaverService.ngInjectableDef = i0.ɵɵdefineInjectable({ factory: function FileSaverService_Factory() { return new FileSaverService(); }, token: FileSaverService, providedIn: "root" });
FileSaverService.ɵfac = function FileSaverService_Factory(t) { return new (t || FileSaverService)(); };
FileSaverService.ɵprov = ɵngcc0.ɵɵdefineInjectable({ token: FileSaverService, factory: function (t) { return FileSaverService.ɵfac(t); }, providedIn: 'root' });
(function () { (typeof ngDevMode === "undefined" || ngDevMode) && ɵngcc0.ɵsetClassMetadata(FileSaverService, [{
        type: Injectable,
        args: [{ providedIn: 'root' }]
    }], function () { return []; }, null); })();
    return FileSaverService;
}());
export { FileSaverService };

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZmlsZXNhdmVyLnNlcnZpY2UuanMiLCJzb3VyY2VzIjpbIm5neC1maWxlc2F2ZXIvc3JjL2ZpbGVzYXZlci5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFBQSxPQUFPLEVBQUUsVUFBVSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzNDLE9BQU8sRUFBRSxNQUFNLEVBQW9CLE1BQU0sWUFBWSxDQUFDO0FBQ3REO0FBRUE7QUFDb0IsSUFEcEI7QUFBOEIsS0F3QzdCO0FBQ0QsSUF4Q0Usc0JBQUksa0RBQW9CO0FBQUksYUFBNUI7QUFBYyxZQUNaLElBQUk7QUFDUixnQkFBTSxPQUFPLENBQUMsQ0FBQyxJQUFJLElBQUksRUFBRSxDQUFDO0FBQzFCLGFBQUs7QUFBQyxZQUFBLE9BQU8sQ0FBQyxFQUFFO0FBQ2hCLGdCQUFNLE9BQU8sS0FBSyxDQUFDO0FBQ25CLGFBQUs7QUFDTCxRQUFFLENBQUM7QUFFSDtBQUEwQjtBQUNaLE9BSFg7QUFDSCxJQUNFLGtDQUFPLEdBQVAsVUFBUSxRQUFpQjtBQUFJLFFBQzNCLElBQUksQ0FBQyxRQUFRLElBQUksUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRTtBQUN2RCxZQUFNLE9BQU8sWUFBWSxDQUFDO0FBQzFCLFNBQUs7QUFDTCxRQUFJLElBQU0sSUFBSSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNoRSxRQUFJLFFBQVEsSUFBSSxFQUFFO0FBQ2xCLFlBQU0sS0FBSyxLQUFLO0FBQ2hCLGdCQUFRLE9BQU8sWUFBWSxDQUFDO0FBQzVCLFlBQU0sS0FBSyxLQUFLLENBQUM7QUFDakIsWUFBTSxLQUFLLE1BQU07QUFDakIsZ0JBQVEsT0FBTyxVQUFRLElBQU0sQ0FBQztBQUM5QixZQUFNLEtBQUssTUFBTTtBQUNqQixnQkFBUSxPQUFPLGNBQWMsQ0FBQztBQUM5QixZQUFNO0FBQ04sZ0JBQVEsT0FBTyxpQkFBZSxJQUFNLENBQUM7QUFDckMsU0FBSztBQUNMLElBQUUsQ0FBQztBQUVILElBQUUsK0JBQUksR0FBSixVQUFLLElBQVUsRUFBRSxRQUFpQixFQUFFLFFBQWlCLEVBQUUsTUFBeUI7QUFBSSxRQUNsRixJQUFJLENBQUMsSUFBSSxFQUFFO0FBQ2YsWUFBTSxNQUFNLElBQUksS0FBSyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDakUsU0FBSztBQUNMLFFBQ0ksSUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLElBQUksRUFBRSxRQUFRLElBQUksSUFBSSxDQUFDLElBQUksSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUM3RixRQUFJLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FBUyxDQUFDLFFBQVEsSUFBSSxVQUFVLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM1RCxJQUFFLENBQUM7QUFFSCxJQUFFLG1DQUFRLEdBQVIsVUFBUyxHQUFXLEVBQUUsUUFBaUIsRUFBRSxNQUF5QjtBQUFJLFFBQ3BFLElBQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQztBQUNqQyxRQUFJLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLFFBQVEsRUFBRSxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDNUMsSUFBRSxDQUFDO0FBQ0Y7SUF4Q1ksZ0JBQWdCLHdCQUQ1QixVQUFVLENBQUMsRUFBRSxVQUFVLEVBQUUsTUFBTSxFQUFFLENBQUMsUUFDdEIsZ0JBQWdCLENBd0M1Qjs7Ozs7Z0RBQ0Q7QUFBQywyQkE3Q0Q7QUFBRSxDQTRDRCxBQXhDRCxJQXdDQztBQUNELFNBekNhLGdCQUFnQjtBQUM1QiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IHNhdmVBcywgRmlsZVNhdmVyT3B0aW9ucyB9IGZyb20gJ2ZpbGUtc2F2ZXInO1xuXG5ASW5qZWN0YWJsZSh7IHByb3ZpZGVkSW46ICdyb290JyB9KVxuZXhwb3J0IGNsYXNzIEZpbGVTYXZlclNlcnZpY2Uge1xuICBnZXQgaXNGaWxlU2F2ZXJTdXBwb3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiAhIW5ldyBCbG9iKCk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIGdlblR5cGUoZmlsZU5hbWU/OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghZmlsZU5hbWUgfHwgZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKSA9PT0gLTEpIHtcbiAgICAgIHJldHVybiAndGV4dC9wbGFpbic7XG4gICAgfVxuICAgIGNvbnN0IHR5cGUgPSBmaWxlTmFtZS5zdWJzdHIoZmlsZU5hbWUubGFzdEluZGV4T2YoJy4nKSArIDEpO1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAndHh0JzpcbiAgICAgICAgcmV0dXJuICd0ZXh0L3BsYWluJztcbiAgICAgIGNhc2UgJ3htbCc6XG4gICAgICBjYXNlICdodG1sJzpcbiAgICAgICAgcmV0dXJuIGB0ZXh0LyR7dHlwZX1gO1xuICAgICAgY2FzZSAnanNvbic6XG4gICAgICAgIHJldHVybiAnb2N0ZXQvc3RyZWFtJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBgYXBwbGljYXRpb24vJHt0eXBlfWA7XG4gICAgfVxuICB9XG5cbiAgc2F2ZShibG9iOiBCbG9iLCBmaWxlTmFtZT86IHN0cmluZywgZmlsdFR5cGU/OiBzdHJpbmcsIG9wdGlvbj86IEZpbGVTYXZlck9wdGlvbnMpOiB2b2lkIHtcbiAgICBpZiAoIWJsb2IpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignRGF0YSBhcmd1bWVudCBzaG91bGQgYmUgYSBibG9iIGluc3RhbmNlJyk7XG4gICAgfVxuXG4gICAgY29uc3QgZmlsZSA9IG5ldyBCbG9iKFtibG9iXSwgeyB0eXBlOiBmaWx0VHlwZSB8fCBibG9iLnR5cGUgfHwgdGhpcy5nZW5UeXBlKGZpbGVOYW1lKSB9KTtcbiAgICBzYXZlQXMoZmlsZSwgZGVjb2RlVVJJKGZpbGVOYW1lIHx8ICdkb3dubG9hZCcpLCBvcHRpb24pO1xuICB9XG5cbiAgc2F2ZVRleHQodHh0OiBzdHJpbmcsIGZpbGVOYW1lPzogc3RyaW5nLCBvcHRpb24/OiBGaWxlU2F2ZXJPcHRpb25zKTogdm9pZCB7XG4gICAgY29uc3QgYmxvYiA9IG5ldyBCbG9iKFt0eHRdKTtcbiAgICB0aGlzLnNhdmUoYmxvYiwgZmlsZU5hbWUsIG51bGwsIG9wdGlvbik7XG4gIH1cbn1cbiJdfQ==